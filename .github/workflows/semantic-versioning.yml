name: semantic-versioning
run-name: Automate Versioning based on commits

on:
  push:
    branches-ignore: [master, main]
jobs: # list of things to do
  version-increment:
    name: semanticversioning # job name (unique id)
    runs-on: ubuntu-latest # on which machine to run
    steps: # list of steps
      - name: Bump version
        uses: PaulHatch/semantic-version@v4.0.2
        id: tag_version_develop
        with:
          tag_prefix: 'v'
          major_pattern: 'MAJOR'
          minor_pattern: 'MINOR'
          format: '${major}.${minor}.${patch}'
          namespace: develop
          change_path: '.'
          short_tags: false
          bump_each_commit: true
      - name: Tag Release (vX.Y.Z)
        run: |
          git tag ${{ steps.tag_version_develop.outputs.version_tag }}
          git push origin ${{ steps.tag_version_develop.outputs.version_tag }}
